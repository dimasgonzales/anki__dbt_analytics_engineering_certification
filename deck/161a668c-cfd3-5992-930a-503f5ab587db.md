---
tags:
- card_type/scenario
- materializations
- modularity
- seeds
citations:
- cleaned_docs/snapshots/rank_1.md
guid: 057bc1cef7
source: llm
uuid: 161a668c-cfd3-5992-930a-503f5ab587db
---

<front>

You are snapshotting a source table where rows are hard-deleted when an order is cancelled. You want your snapshot to reflect this cancellation by closing the history record. What configuration is required?

</front>

---

<back>

You must configure **`hard_deletes='new_record'`**.

When dbt detects that a `unique_key` no longer exists in the source, this setting ensures the existing record is invalidated (given a `dbt_valid_to` date).

```yaml
config(
  ...
  hard_deletes='new_record'
)
```

</back>
