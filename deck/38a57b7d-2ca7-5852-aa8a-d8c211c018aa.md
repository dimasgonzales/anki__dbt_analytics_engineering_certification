---
tags:
- card_type/scenario
- debugging/compiled-code
- debugging/yaml-compilation
- development/jinja-macros
citations:
- cleaned_docs/compiled-code/rank_1.md
guid: d5c2022555
source: llm
uuid: 38a57b7d-2ca7-5852-aa8a-d8c211c018aa
---

<front>

You have a macro that uses `run_query` to inspect table data. It causes your project to fail during simple commands like `dbt parse` or `dbt docs generate`. How should you modify the macro code to fix this?

</front>

---

<back>

Wrap the heavy operation in an `if execute` block. This ensures the query only executes during active run or compile phases, not during parsing.

Example:
```sql
{% if execute %}
  {% set results = run_query(sql) %}
{% endif %}
```

</back>
