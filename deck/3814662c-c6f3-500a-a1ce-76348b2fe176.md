---
tags:
- card_type/factual
- development/python-models
- development/snapshots
- development/sources
citations:
- cleaned_docs/sources/rank_7.md
guid: ffc419352c
source: llm
uuid: 3814662c-c6f3-500a-a1ce-76348b2fe176
claim_meta:
  verdict: NOT_FOUND
  explanation: "The Reference Text describes the SQL query used to retrieve timestamps for source freshness checks, including max_loaded_at and a calculated timestamp, but does not mention the specific calculation of the difference between snapshotted_at and max_loaded_at, the metric max_loaded_at_time_ago_in_s, or that the calculation is performed in Python. Key terms from the Answer, such as snapshotted_at and Python-based timezone handling, are not present in the text."
  citation:
    quote: "select max(_etl_loaded_at) as max_loaded_at, convert_timezone('UTC', current_timestamp()) as calculated_at from raw.jaffle_shop.orders"
    is_quote_valid: true
---

<front>

How does dbt calculate the `max_loaded_at_time_ago_in_s` metric during a source freshness check?

</front>

---

<back>

dbt calculates the difference between the `snapshotted_at` timestamp (current execution time) and the `max_loaded_at` timestamp (retrieved from the database).

This calculation is performed in Python to handle timezone logic.

</back>
