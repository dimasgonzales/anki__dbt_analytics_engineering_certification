---
tags:
  - jinja-macros
  - yaml-compilation
  - model-access
citations:
- cleaned_docs/snapshots/rank_10.md
guid: 17cdb08cae
source: llm
uuid: 78763617-e1c4-51c5-a0d0-36c148b9c1bf
---

<front>

Why is it necessary to wrap logic accessing the `graph` variable inside an `{% if execute %}` block within a macro?

</front>

---

<back>

dbt processes Jinja in two phases: parsing and execution. The `graph` variable is not fully populated during the parsing phase. The `{% if execute %}` check ensures the code only runs during the execution phase when the graph is complete, preventing compilation errors.

</back>
