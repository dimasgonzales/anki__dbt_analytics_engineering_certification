---
tags:
- card_type/factual
- debugging/yaml-compilation
- development/jinja-macros
- governance/model-access
citations:
- cleaned_docs/snapshots/rank_10.md
guid: 17cdb08cae
source: llm
uuid: 78763617-e1c4-51c5-a0d0-36c148b9c1bf
claim_meta:
  verdict: NOT_FOUND
  explanation: "The Reference Text provides an example of using `{% if execute %}` in a macro, such as in the code snippet from selectors/rank_9.md, but it does not contain information about dbt's Jinja processing phases (parsing and execution) or the state of the `graph` variable during parsing. The Answer's rationale about why it is necessary to wrap logic in `{% if execute %}` is not addressed in the provided text, so there is insufficient evidence to verify or contradict it."
  citation:
    quote: null
    is_quote_valid: false
---

<front>

Why is it necessary to wrap logic accessing the `graph` variable inside an `{% if execute %}` block within a macro?

</front>

---

<back>

dbt processes Jinja in two phases: parsing and execution. The `graph` variable is not fully populated during the parsing phase. The `{% if execute %}` check ensures the code only runs during the execution phase when the graph is complete, preventing compilation errors.

</back>
