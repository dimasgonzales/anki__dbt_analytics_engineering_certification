---
tags:
- modularity
- packages
- sql-performance
citations:
- cleaned_docs/docs-generation/rank_5.md
guid: d0aa8031a0
source: llm
uuid: 0aaba1f4-4e3f-5e60-b15e-12f2c3f86078
---

<front>

A model's primary key is generated using `md5(concat(user_id, session_id))`. You notice duplicates in the final table even though `user_id` and `session_id` pairs are technically distinct (e.g., User 'A', Session 'BC' vs User 'AB', Session 'C'). How would you troubleshoot and fix this?

</front>

---

<back>

The duplicates are caused by a lack of separators in the concatenation logic. To fix this, you should insert a separator character between fields or use `dbt_utils.generate_surrogate_key`, which handles this automatically.

Manual Fix Logic:
```sql
md5(concat(user_id, '-', session_id))
```

</back>
