---
tags:
- card_type/scenario
- compiled-code
- jinja-macros
- model-access
citations:
- cleaned_docs/jinja-macros/rank_6.md
guid: 7abe51e928
source: llm
uuid: 2ae6eca2-52a3-5487-a37c-fde2a5a2c3a3
---

<front>

Your macro uses `run_query` to fetch configuration settings from a table, but sometimes the table is empty, causing the macro to fail when accessing `.columns[0]`. How should you make this code more robust?

</front>

---

<back>

Check if the results exist and have rows before processing. Use the Jinja `length` filter:

```jinja
{% if results and results|length > 0 %}
  -- process results
{% endif %}
```

</back>
