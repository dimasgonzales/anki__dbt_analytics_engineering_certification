---
tags:
- card_type/scenario
- debugging/yaml-compilation
- development/jinja-macros
- governance/model-access
citations:
- cleaned_docs/contracts/rank_7.md
guid: 2cecf22b3d
source: llm
uuid: 65930ad5-4314-5752-9065-cda6adad65bd
---

<front>

A macro using `run_query()` to fetch column names fails during `dbt compile` with an error indicating the result object is None. What is the likely cause and how do you fix it?

</front>

---

<back>

The cause is trying to access query results during the parsing phase.

To fix this, wrap the logic that processes the results in an `{% if execute %}` block:

```sql
{%- set results = run_query(my_query) -%}
{% if execute %}
  {# Process results here #}
{% endif %}
```

</back>
