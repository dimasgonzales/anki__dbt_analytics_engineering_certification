---
tags:
- card_type/factual
- debugging/compiled-code
- pipelines/deployment-jobs
- state/state-concepts
citations:
- cleaned_docs/dbt-clone/rank_9.md
guid: bd281f874c
source: llm
uuid: a1fd8b28-3b2c-5221-8683-5a678b97f3cf
---

<front>

What two conditions must be met for dbt to resolve a `ref()` to the state manifest namespace when running with the `--defer` flag?

</front>

---

<back>

For dbt to defer a reference to the state (usually production), two conditions must be met:
1. The referenced node is **not included** in the current run selection.
2. The referenced node **does not exist** in the current target database (unless overridden by `--favor-state`).

</back>
