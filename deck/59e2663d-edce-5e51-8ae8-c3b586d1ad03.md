---
tags:
- card_type/scenario
- compiled-code
- jinja-macros
- model-access
citations:
- cleaned_docs/jinja-macros/rank_5.md
guid: a7169ab56d
source: llm
uuid: 59e2663d-edce-5e51-8ae8-c3b586d1ad03
---

<front>

You need to create a macro that fetches a list of payment methods from the database and iterates over them to generate case statements. How would you access the value of the 'payment_method' column inside the loop?

</front>

---

<back>

You would execute the query using `run_query`, loop through `.rows`, and access the column by name using bracket notation on the row object.

```jinja
{% set payments = run_query('select payment_method from ...') %}
{% for row in payments.rows %}
  when '{{ row['payment_method'] }}' then ...
{% endfor %}
```

</back>
