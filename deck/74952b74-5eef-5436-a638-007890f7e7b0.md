---
tags:
- card_type/factual
- development/jinja-macros
- governance/versioning
- pipelines/deployment-jobs
citations:
  - docs/site_docs.getdbt.com/citations/docs_getdbt_com_reference_project_configs_on_run_start_on_run_end.md
  - docs/site_docs.getdbt.com/citations/docs_getdbt_com_reference_dbt_jinja_functions_on_run_end_context.md
guid: kEe49zR;+4
source: apkg
uuid: 74952b74-5eef-5436-a638-007890f7e7b0
claim_meta:
  verdict: NOT_FOUND
  explanation: "The reference text explicitly supports the fields 'on-run-start' and 'on-run-end' with the syntax 'sql-statement | [sql-statement]' and their usage in dbt commands, but does not contain evidence for the specific Jinja variables (schemas, database_schemas, results) or the historical use for GRANT statements and the v1.2 change to 'grants' config mentioned in the answer."
  citation:
    quote: "on-run-start: sql-statement | [sql-statement]  on-run-end: sql-statement | [sql-statement]"
    is_quote_valid: true
---

<front>

What are the **dbt\_project.yml** fields used to specify custom SQL statements to be run at the start and/or end of various dbt commands? What was the most common use of this functionality in older versions of dbt?

</front>

---

<back>

```
on-run-start: sql-statement | [sql-statement]
on-run-end: sql-statement | [sql-statement]
```The values of these options can either be single SQL statements or a YAML list of SQL statements. These queries *can* use Jinja, and queries invoked in `on-run-end` actually can reference special Jinja variables that are only available in that context:  

- `schemas` references the schemas that dbt has built models into during the previous run
- `database_schemas` references the databases *and* schemas that dbt has built models into during the previous run
- `results` contains a list of Results objects with one element per resource that executed in the dbt job

Previously, by far the most common use for this functionality was to execute GRANT statements on models right after creating them. However, in dbt v1.2, this functionality was elevated to a dedicated resource config option ("grants"), and that is recommended to be used going forward.

</back>
