# Perform whatever functionality is available, like convert to a pandas table.  
print(arrow_table.to_pandas())  
"""  
order_total  ordered_at  
          3  2023-08-07  
        112  2023-08-08  
         12  2023-08-09  
       5123  2023-08-10  
"""
```

### Additional create query examples[​](#additional-create-query-examples "Direct link to Additional create query examples")

The following section provides query examples for the GraphQL API, such as how to query metrics, dimensions, where filters, and more:

* [Query metric alias](#query-metric-alias) — Query with metric alias, which allows you to use simpler or more intuitive names for metrics instead of their full definitions.
* [Query with a time grain](#query-with-a-time-grain) — Fetch multiple metrics with a change in time dimension granularities.
* [Query multiple metrics and multiple dimensions](#query-multiple-metrics-and-multiple-dimensions) — Select common dimensions for multiple metrics.
* [Query a categorical dimension on its own](#query-a-categorical-dimension-on-its-own) — Group by a categorical dimension.
* [Query with a where filter](#query-with-a-where-filter) — Use the `where` parameter to filter on dimensions and entities using parameters.
* [Query with order](#query-with-order) — Query with `orderBy`, accepts basic string that's a Dimension, Metric, or Entity. Defaults to ascending order.
* [Query with limit](#query-with-limit) — Query using a `limit` clause.
* [Query saved queries](#query-saved-queries) — Query using a saved query using the `savedQuery` parameter for frequently used queries.
* [Query with just compiling SQL](#query-with-just-compiling-sql) — Query using a compile keyword using the `compileSql` mutation.
* [Query records](#query-records) — View all the queries made in your project.

#### Query metric alias[​](#query-metric-alias "Direct link to Query metric alias")

```
mutation {  
  createQuery(  
    environmentId: "123"  
    metrics: [{name: "metric_name", alias: "metric_alias"}]  
  ) {  
    ...  
  }  
}
```

#### Query with a time grain[​](#query-with-a-time-grain "Direct link to Query with a time grain")

```
mutation {  
  createQuery(  
    environmentId: "123"  
    metrics: [{name: "order_total"}]  
    groupBy: [{name: "metric_time", grain: MONTH}]   
  ) {  
    queryId  
  }  
}
```

Note that when using granularity in the query, the output of a time dimension with a time grain applied to it always takes the form of a dimension name appended with a double underscore and the granularity level - `{time_dimension_name}__{DAY|WEEK|MONTH|QUARTER|YEAR}`. Even if no granularity is specified, it will also always have a granularity appended to it and will default to the lowest available (usually daily for most data sources). It is encouraged to specify a granularity when using time dimensions so that there won't be any unexpected results with the output data.

#### Query multiple metrics and multiple dimensions[​](#query-multiple-metrics-and-multiple-dimensions "Direct link to Query multiple metrics and multiple dimensions")

```
mutation {  
  createQuery(  
    environmentId: "123"  
    metrics: [{name: "food_order_amount"}, {name: "order_gross_profit"}]  
    groupBy: [{name: "metric_time", grain: MONTH}, {name: "customer__customer_type"}]  
  ) {  
    queryId  
  }  
}
```

#### Query a categorical dimension on its own[​](#query-a-categorical-dimension-on-its-own "Direct link to Query a categorical dimension on its own")

```
mutation {  
  createQuery(  
    environmentId: "123"  
    groupBy: [{name: "customer__customer_type"}]  
  ) {  
    queryId  
  }  
}
```

#### Query with a where filter[​](#query-with-a-where-filter "Direct link to Query with a where filter")

The `where` filter takes a list argument (or a string for a single input). Depending on the object you are filtering, there are a couple of parameters:

* `Dimension()` — Used for any categorical or time dimensions. For example, `Dimension('metric_time').grain('week')` or `Dimension('customer__country')`.
* `Entity()` — Used for entities like primary and foreign keys, such as `Entity('order_id')`.

Note: If you prefer a `where` clause with a more explicit path, you can optionally use `TimeDimension()` to separate categorical dimensions from time ones. The `TimeDimension` input takes the time dimension and optionally the granularity level. `TimeDimension('metric_time', 'month')`.

```
mutation {  
  createQuery(  
    environmentId: "123"  
    metrics:[{name: "order_total"}]  
    groupBy:[{name: "customer__customer_type"}, {name: "metric_time", grain: month}]  
    where:[{sql: "{{ Dimension('customer__customer_type') }} = 'new'"}, {sql:"{{ Dimension('metric_time').grain('month') }} > '2022-10-01'"}]  
    ) {  
     queryId  
    }  
}
```

For both `TimeDimension()`, the grain is only required in the `where` filter if the aggregation time dimensions for the measures and metrics associated with the where filter have different grains.

#### Example[​](#example "Direct link to Example")

For example, consider this semantic model and metric configuration, which contains two metrics that are aggregated across different time grains. This example shows a single semantic model, but the same goes for metrics across more than one semantic model.

```
semantic_model:  
  name: my_model_source  
  
defaults:  
  agg_time_dimension: created_month  
  measures:  
    - name: measure_0  
      agg: sum  
    - name: measure_1  
      agg: sum  
      agg_time_dimension: order_year  
  dimensions:  
    - name: created_month  
      type: time  
      type_params:  
        time_granularity: month  
    - name: order_year  
      type: time  
      type_params:  
        time_granularity: year  
  
metrics:  
  - name: metric_0  
    description: A metric with a month grain.  
    type: simple  
    type_params:  
      measure: measure_0  
  - name: metric_1  
    description: A metric with a year grain.  
    type: simple  
    type_params:  
      measure: measure_1
```

Assuming the user is querying `metric_0` and `metric_1` together, the following are valid or invalid filters:

| Example | Filter |
| --- | --- |
| ✅   Valid filter | `"{{ TimeDimension('metric_time', 'year') }} > '2020-01-01'"` |
| ❌   Invalid filter | `"{{ TimeDimension('metric_time') }} > '2020-01-01'"`    Metrics in the query are defined based on measures with different grains. |
| ❌   Invalid filter | `"{{ TimeDimension('metric_time', 'month') }} > '2020-01-01'"`    `metric_1` is not available at a month grain. |

#### Multi-hop joins[​](#multi-hop-joins "Direct link to Multi-hop joins")

In cases where you need to query across multiple related tables (multi-hop joins), use the `entity_path` argument to specify the path between related entities. The following are examples of how you can define these joins:

* In this example, you're querying the `location_name` dimension but specifying that it should be joined using the `order_id` field.

  ```
  {{Dimension('location__location_name', entity_path=['order_id'])}}
  ```
* In this example, the `salesforce_account_owner` dimension is joined to the `region` field, with the path going through `salesforce_account`.

  ```
  {{ Dimension('salesforce_account_owner__region',['salesforce_account']) }}
  ```

#### Query with order[​](#query-with-order "Direct link to Query with order")

```
mutation {  
  createQuery(  
    environmentId: "123"  
    metrics: [{name: "order_total"}]  
    groupBy: [{name: "metric_time", grain: MONTH}]   
    orderBy: [{metric: {name: "order_total"}}, {groupBy: {name: "metric_time", grain: MONTH}, descending:true}]  
  ) {  
    queryId  
  }  
}
```

#### Query with limit[​](#query-with-limit "Direct link to Query with limit")

```
mutation {  
  createQuery(  
    environmentId: "123"  
    metrics: [{name:"food_order_amount"}, {name: "order_gross_profit"}]  
    groupBy: [{name:"metric_time", grain: MONTH}, {name: "customer__customer_type"}]  
    limit: 10   
  ) {  
    queryId  
  }  
}
```

#### Query saved queries[​](#query-saved-queries "Direct link to Query saved queries")

This takes the same inputs as the `createQuery` mutation, but includes the field `savedQuery`. You can use this for frequently used queries.

```
mutation {  
  createQuery(  
    environmentId: "123"  
    savedQuery: "new_customer_orders"  
  ) {  
    queryId  
  }  
}
```

A note on querying saved queries

When querying [saved queries](/docs/build/saved-queries),you can use parameters such as `where`, `limit`, `order`, `compile`, and so on. However, keep in mind that you can't access `metric` or `group_by` parameters in this context. This is because they are predetermined and fixed parameters for saved queries, and you can't change them at query time. If you would like to query more metrics or dimensions, you can build the query using the standard format.

#### Query with just compiling SQL[​](#query-with-just-compiling-sql "Direct link to Query with just compiling SQL")

This takes the same inputs as the `createQuery` mutation.

```
mutation {  
  compileSql(  
    environmentId: "123"  
    metrics: [{name:"food_order_amount"} {name:"order_gross_profit"}]  
    groupBy: [{name:"metric_time", grain: MONTH}, {name:"customer__customer_type"}]  
  ) {  
    sql  
  }  
}
```

#### Query records[​](#query-records "Direct link to Query records")

Use this endpoint to view all the queries made in your project. This covers both Insights and Semantic Layer queries.

```
{  
  queryRecords(  
    environmentId:123  
  ) {  
    items {  
      queryId  
      status  
      startTime  
      endTime  
      connectionDetails  
      sqlDialect  
      connectionSchema  
      error  
      queryDetails {  
        ... on SemanticLayerQueryDetails {  
          params {  
            type  
            metrics {  
              name  
            }  
            groupBy {  
              name  
              grain  
            }  
            limit  
            where {  
              sql  
            }  
            orderBy {  
              groupBy {  
                name  
                grain  
              }  
              metric {  
                name  
              }  
              descending  
            }  
            savedQuery  
          }  
        }  
        ... on RawSqlQueryDetails {  
          queryStr  
          compiledSql  
          numCols  
          queryDescription  
          queryTitle  
        }  
      }  
    }  
    totalItems  
    pageNum  
    pageSize  
  }  
}
```

Was this page helpful?
----------------------

YesNo

[Privacy policy](https://www.getdbt.com/cloud/privacy-policy)[Create a GitHub issue](https://github.com/dbt-labs/docs.getdbt.com/issues)

This site is protected by reCAPTCHA and the Google [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms) apply.

0

**Tags:**

* [Semantic Layer](/tags/semantic-layer)
* [APIs](/tags/ap-is)

[Edit this page](https://github.com/dbt-labs/docs.getdbt.com/edit/current/website/docs/docs/dbt-cloud-apis/sl-graphql.md)

Last updated on **Dec 4, 2025**

[Previous

Semantic Layer APIs](/docs/dbt-cloud-apis/sl-api-overview)[Next

JDBC](/docs/dbt-cloud-apis/sl-jdbc)

* [dbt Semantic Layer GraphQL API](#dbt-semantic-layer-graphql-api)
* [Requirements to use the GraphQL API](#requirements-to-use-the-graphql-api)
* [Using the GraphQL API](#using-the-graphql-api)
  + [Metadata calls](#metadata-calls)
  + [Querying](#querying)
  + [Output format and pagination](#output-format-and-pagination)
  + [Run a Python query](#run-a-python-query)
  + [Additional create query examples](#additional-create-query-examples)

[Edit this page](https://github.com/dbt-labs/docs.getdbt.com/edit/current/website/docs/docs/dbt-cloud-apis/sl-graphql.md)

Get started

Start building with dbt.
------------------------

The free dbt VS Code extension is the best way to develop locally with the dbt Fusion Engine.

[Install free extension](https://marketplace.visualstudio.com/items?itemName=dbtLabsInc.dbt)
[Request your demo](https://www.getdbt.com/contact)

[![dbt Labs](/img/dbt-logo-light.svg?v=2)](/)

##### Resources

[VS Code Extension](/docs/about-dbt-extension)
[Resource Hub](https://www.getdbt.com/resources)
[dbt Learn](https://www.getdbt.com/dbt-learn)
[Certification](https://www.getdbt.com/dbt-certification)
[Developer Blog](/blog)

##### Community

[Join the Community](/community/join)
[Become a Contributor](/community/contribute)
[Open Source dbt Packages](https://hub.getdbt.com/)
[Community Forum](/community/forum)

##### Support

[Contact Support](/docs/dbt-support)
[Professional Services](https://www.getdbt.com/services)
[Find a Partner](https://www.getdbt.com/partner-directory)
[System Status](https://status.getdbt.com/)

##### Connect with Us

© 2025 dbt Labs, Inc. All Rights Reserved.

[Terms of Service](https://www.getdbt.com/terms-of-use/)
[Privacy Policy](https://www.getdbt.com/cloud/privacy-policy/)
[Security](https://www.getdbt.com/security/)
Cookie Settings